# =============================================================================
# AC FIXBOT - Variables de Entorno
# Copia este archivo a .env.local para desarrollo local
# =============================================================================

# =============================================================================
# REQUERIDAS - La aplicacion no iniciara sin estas variables
# =============================================================================

# Azure SQL Database - Connection string completo
SQL_CONNECTION_STRING=Server=tcp:sql-acfixbot-poc.database.windows.net,1433;Database=db-acfixbot;User ID=admin;Password=YOUR_PASSWORD;Encrypt=true;TrustServerCertificate=false;Connection Timeout=30;

# WhatsApp Business API - Meta Graph API
WHATSAPP_TOKEN=your_whatsapp_access_token
WHATSAPP_PHONE_ID=123456789012345
WHATSAPP_VERIFY_TOKEN=your_verify_token

# =============================================================================
# OPCIONALES - Tienen valores por defecto pero se recomienda configurar
# =============================================================================

# --- Inteligencia Artificial ---
# Habilitar/Deshabilitar IA para deteccion de intenciones
USE_AI=true

# Proveedor de IA: 'gemini' (POC) o 'azure-openai' (Produccion)
AI_PROVIDER=gemini

# Google Gemini (POC)
GEMINI_API_KEY=your_gemini_api_key

# Azure OpenAI (Produccion)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_KEY=your_azure_openai_key
AZURE_OPENAI_DEPLOYMENT=gpt-4o-mini

# --- Transcripcion de Audio (GPT-4o-mini-audio) ---
# Habilitar transcripcion de mensajes de voz a texto
AUDIO_TRANSCRIPTION_ENABLED=false
# Nombre del deployment de audio (usa gpt-4o-mini-audio-preview)
# Tiene mejor cuota y precision que Whisper
AZURE_AUDIO_DEPLOYMENT=gpt-4o-mini-audio

# --- Azure Computer Vision (OCR) ---
VISION_ENDPOINT=https://your-vision.cognitiveservices.azure.com/
VISION_KEY=your_vision_key

# --- Azure Blob Storage (Imagenes) ---
BLOB_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=stacfixbotpoc;AccountKey=YOUR_KEY;EndpointSuffix=core.windows.net

# --- Configuracion de Sesiones ---
# Minutos de inactividad antes de cerrar sesion (default: 30)
SESSION_TIMEOUT_MINUTES=30
# Minutos de inactividad antes de enviar "Sigues ahi?" (default: 25)
SESSION_WARNING_MINUTES=25
# Schedule del timer de limpieza en formato CRON (default: cada 5 minutos)
TIMER_SCHEDULE=0 */5 * * * *

# --- Configuracion de Encuestas ---
# Schedule del timer de encuestas en formato CRON (default: 9:00 AM diario)
SURVEY_TIMER_SCHEDULE=0 0 9 * * *
# Horas a esperar despues de resolucion antes de enviar encuesta (default: 24)
SURVEY_HORAS_ESPERA=24
# Horas para expirar encuestas sin respuesta (default: 72)
SURVEY_HORAS_EXPIRACION=72

# --- Seguridad ---
# App Secret de WhatsApp para verificar firma X-Hub-Signature-256
WHATSAPP_APP_SECRET=your_app_secret
# API Key para endpoints administrativos
ADMIN_API_KEY=your_admin_api_key
# Rate limiting por IP (default: 100 requests por minuto)
IP_RATE_LIMIT=100
IP_RATE_WINDOW_MS=60000

# --- Ambiente ---
# Ambiente de ejecucion: development, test, production
NODE_ENV=development
